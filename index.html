<html>
<head>
  <meta charset="utf-8">
	
  <title>FRC Team Search</title>
	
  <!-- Favicon code --> 	
	
  <link rel="stylesheet" type="text/css" href="styles.css">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="manifest.json">
  <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">
	
  <!--End of Favicon Code-->
	
</head>
<!--Source for JQuery v 3.2.1-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.debug.js"></script>
	
<body style="background-color: #424242; color: white;">
  	
  <h1>FRC Team Search</h1>
  <p>
    <label>Team Number: </label>
    <input type="text" id="teamNum" value="" class="testss"/>
    <button id="button" class="button">Search</button>
	  <button id="clear" class="clear">Clear</button>
    <button id="rookie">Rookie Events</button>
  </p>
  <p id="myResult"></p>
	<dl id="result"></dl>
  <script> 
	 $(document).ready(function() {
		$('#button').click(function() {
			var inputty = $('#teamNum').val();
			if (inputty !== undefined) {
		var sputty = String(inputty);
			var urls = 'https://www.thebluealliance.com/api/v3/team/frc' + inputty.toString();
		console.log(urls);
			$.ajax({
		    url: urls,
		    headers: {
			'X-TBA-Auth-Key': 'u2kDTQPh5Kgn7cOTKTsIzmqoT0KsXBq3PO5U0BeSQgSb7k1kakV6ElfYC0pLCBEf'},
		method: 'GET',
		dataType: 'json',
		success: function(data) {
	    for(var key in data) {
	      if(data[key] !== null & jQuery.type(data[key]) !== 'object') {
		    var keys;
		    if(key.indexOf('_prov') !== -1) {
			keys = key.replace('_prov', '');
		       	
		     }
		     else if (key.indexOf('_') !== -1 ) {
			  keys = key.replace('_', ' ');   
		     }
		     else {
			keys = key;     
		     }
		    $('#result').append("<dt class='title' id='" + key + "' style='text-transform: capitalize;'>" + keys + "</dt><dd class='definition' id='" + key + "'>" + data[key] + "</dd>");
	      }
	    }
	    var dates = JSON.stringify(data);
	    $('#myResult').append(data);
	    	  $('#rookie').click(function () {
		   var inputty = $('#teamNum').val();
        	   var urls = 'https://www.thebluealliance.com/api/v3/team/frc' + inputty.toString();
		   var urlss = urls + '/events/' + data['rookie_year'].toString();
		  console.log(urlss);
		  $.ajax({
		    url: urls,
		    headers: {
			'X-TBA-Auth-Key': 'u2kDTQPh5Kgn7cOTKTsIzmqoT0KsXBq3PO5U0BeSQgSb7k1kakV6ElfYC0pLCBEf'},
		    method: 'GET',
		    dataType: 'json',
		    success: function(datas) {
		    	for(var codes in datas) {
				var doc = new jsPDF();
			if(datas[codes] !== null  & jQuery.type(datas[codes]) !== 'object') {
				var code = codes.toString();
				code = code.toLowerCase().replace(/\b[a-z]/g, function(letter) {
    					return letter.toUpperCase();
				});
				var sata = datas[codes].toString();
				sata = sata.toLowerCase().replace(/\b[a-z]/g, function(letter) {
    					return letter.toUpperCase();
				});
				doc.text(20, 20, code. + ': ' + sata);
			}}
			doc.save(inputty.toString() + 'rookieevents.pdf');
		    }
		  });
	  });
		}
	      });
	    }
	  });
          $('#clear').click(function () {
		$('#teamNum').val('');
		$('#result').empty();  
	  });
	    });
  </script>
</body>
</html>
